<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
    <title>TechMart - Bilgisayar Kategorisi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            overflow-x: hidden;
        }

        .demo-container {
            display: block;
            height: 100vh;
        }

        /* MOCK E-Tƒ∞CARET SAYFASI */
        .ecommerce-panel {
            background: white;
            overflow-y: auto;
            width: 100%;
            height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-title {
            font-size: 1rem;
            opacity: 0.95;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 15px;
            display: inline-block;
            transition: all 0.3s ease;
            font-weight: 500;
            border-left: 4px solid transparent;
        }

        .search-bar {
            margin: 15px 20px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 45px 12px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
        }

        .search-bar::after {
            content: "üîç";
            position: absolute;
            right: 15px;
            top: 12px;
            font-size: 1rem;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 20px 20px;
            padding: 15px 20px;
            background: #f8fafc;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .stats-bar .results {
            font-weight: 600;
            color: #2d3748;
        }

        .stats-bar .filters {
            display: flex;
            gap: 10px;
        }

        .filter-tag {
            background: #e2e8f0;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            color: #4a5568;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 0 20px 20px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid #e1e8ed;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .product-image {
            height: 200px;
            background: linear-gradient(45deg, #f1f5f9, #e2e8f0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #64748b;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .product-specs {
            font-size: 0.85rem;
            color: #64748b;
            margin-bottom: 10px;
        }

        .product-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .price {
            font-size: 1.2rem;
            font-weight: 700;
            color: #e53e3e;
        }

        .old-price {
            font-size: 0.9rem;
            color: #a0aec0;
            text-decoration: line-through;
        }

        .discount {
            background: #48bb78;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* AI Toast Notification */
        .ai-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        .ai-toast.show {
            transform: translateX(0);
        }

        .ai-toast h4 {
            font-size: 0.9rem;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .ai-toast p {
            font-size: 0.8rem;
            line-height: 1.3;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .header h1 {
                font-size: 1.4rem;
                flex-direction: column;
                gap: 5px;
            }
            
            #ai-indicator {
                font-size: 0.7rem !important;
                margin-left: 0 !important;
            }
            
            .ai-toast {
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <!-- AI Toast Notification -->
        <div class="ai-toast" id="ai-toast">
            <h4 id="toast-title">üç™ Kullanƒ±cƒ± Profili Algƒ±lanƒ±yor</h4>
            <p id="toast-message">√áerezlerden √∂nceki ziyaret bilgileri analiz ediliyor...</p>
        </div>

        <!-- MOCK E-Tƒ∞CARET SAYFASI -->
        <div class="ecommerce-panel">
            <header class="header">
                <h1 id="site-title">
                    üõí <span id="site-name">TechMart</span>
                    <span id="ai-indicator" style="font-size: 0.8rem; background: rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 10px; margin-left: 10px;">ü§ñ AI Ki≈üiselle≈ütirme</span>
                </h1>
                <div class="category-title" id="category-title">
                    üíª Bilgisayar Kategorisi
                </div>
            </header>

            <div class="search-bar">
                <input type="text" placeholder="√úr√ºn ara..." id="search-input">
            </div>

            <div class="stats-bar">
                <div class="results" id="results-count">
                    <span id="product-count">127</span> √ºr√ºn bulundu
                </div>
                <div class="filters">
                    <span class="filter-tag">Fiyat: 2.000‚Ç∫ - 50.000‚Ç∫</span>
                    <span class="filter-tag">Stokta</span>
                    <span class="filter-tag">Kargo Bedava</span>
                </div>
            </div>

            <div class="products-grid" id="products-grid">
                <!-- √úr√ºnler JavaScript ile doldurulacak -->
            </div>
        </div>
    </div>

    <script>
        // Site yapƒ±landƒ±rmasƒ±
        const SITE_CONFIG = {
            siteName: "TechMart",
            category: {
                name: "Bilgisayar",
                icon: "üíª",
                productCount: 127,
                priceRange: "2.000‚Ç∫ - 50.000‚Ç∫"
            },
            products: [
                {
                    name: "ASUS ROG Gaming Laptop",
                    specs: "RTX 4060, Intel i7, 16GB RAM",
                    price: "28.999‚Ç∫",
                    oldPrice: "32.999‚Ç∫",
                    discount: "12%",
                    icon: "üíª"
                },
                {
                    name: "MacBook Pro M3",
                    specs: "M3 Chip, 512GB SSD, 8GB RAM",
                    price: "45.999‚Ç∫",
                    oldPrice: null,
                    discount: null,
                    icon: "üçé"
                },
                {
                    name: "HP Pavilion Gaming",
                    specs: "GTX 1650, Ryzen 5, 8GB RAM",
                    price: "15.499‚Ç∫",
                    oldPrice: "17.999‚Ç∫",
                    discount: "14%",
                    icon: "üíª"
                },
                {
                    name: "Dell XPS 13",
                    specs: "Intel i5, 256GB SSD, 8GB RAM",
                    price: "22.999‚Ç∫",
                    oldPrice: null,
                    discount: null,
                    icon: "üíº"
                },
                {
                    name: "Lenovo ThinkPad",
                    specs: "Intel i7, 512GB SSD, 16GB RAM",
                    price: "35.999‚Ç∫",
                    oldPrice: "39.999‚Ç∫",
                    discount: "10%",
                    icon: "üìä"
                },
                {
                    name: "Acer Predator Gaming",
                    specs: "RTX 4070, Intel i9, 32GB RAM",
                    price: "52.999‚Ç∫",
                    oldPrice: "58.999‚Ç∫",
                    discount: "10%",
                    icon: "üéÆ"
                }
            ]
        };

        // Kullanƒ±cƒ± profilleri (cookie sim√ºlasyonu)
        const USER_PROFILES = [
            {
                ageGroup: "25-35",
                interest: "gaming", 
                budget: "15000-30000",
                visitFrequency: "duzenli",
                timePeriod: "aksam",
                persona: "Gaming Enthusiast"
            },
            {
                ageGroup: "35-45",
                interest: "is",
                budget: "30000+", 
                visitFrequency: "sadik",
                timePeriod: "oglen",
                persona: "Business Professional"
            },
            {
                ageGroup: "18-25",
                interest: "ogrenci",
                budget: "0-5000",
                visitFrequency: "ara-sira", 
                timePeriod: "gece",
                persona: "Budget Student"
            },
            {
                ageGroup: "45+",
                interest: "genel",
                budget: "5000-15000",
                visitFrequency: "ilk-kez",
                timePeriod: "sabah", 
                persona: "First-time Visitor"
            },
            {
                ageGroup: "25-35",
                interest: "grafik",
                budget: "30000+",
                visitFrequency: "duzenli",
                timePeriod: "aksam",
                persona: "Creative Professional"
            }
        ];

        // WebLLM Engine
        let mlcEngine = null;
        let isModelLoaded = false;

        // DOM Elements
        const elements = {
            siteTitle: document.getElementById('site-name'),
            categoryTitle: document.getElementById('category-title'),
            productCount: document.getElementById('product-count'),
            productsGrid: document.getElementById('products-grid'),
            aiToast: document.getElementById('ai-toast'),
            toastTitle: document.getElementById('toast-title'),
            toastMessage: document.getElementById('toast-message')
        };

        // √úr√ºnleri render et
        function renderProducts() {
            elements.productsGrid.innerHTML = SITE_CONFIG.products.map(product => `
                <div class="product-card">
                    <div class="product-image">${product.icon}</div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-specs">${product.specs}</div>
                        <div class="product-price">
                            <div>
                                <div class="price">${product.price}</div>
                                ${product.oldPrice ? `<div class="old-price">${product.oldPrice}</div>` : ''}
                            </div>
                            ${product.discount ? `<div class="discount">-${product.discount}</div>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Toast g√∂ster/gizle
        function showToast(title, message, duration = 3000) {
            elements.toastTitle.textContent = title;
            elements.toastMessage.textContent = message;
            elements.aiToast.classList.add('show');
            
            setTimeout(() => {
                elements.aiToast.classList.remove('show');
            }, duration);
        }

        // Sayfa ba≈ülƒ±ƒüƒ±nƒ± g√ºncelle - Daha belirgin
        function updatePageTitle(newTitle) {
            document.title = newTitle;
            
            // Header'daki kategori ba≈ülƒ±ƒüƒ±nƒ± g√ºncelle - √ßok daha belirgin
            elements.categoryTitle.innerHTML = `üéØ <strong>${newTitle}</strong>`;
            elements.categoryTitle.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';
            elements.categoryTitle.style.borderLeft = '4px solid #22543d';
            elements.categoryTitle.style.padding = '12px 20px';
            elements.categoryTitle.style.fontWeight = '600';
            elements.categoryTitle.style.fontSize = '1.1rem';
            elements.categoryTitle.style.color = 'white';
            elements.categoryTitle.style.boxShadow = '0 4px 15px rgba(72, 187, 120, 0.3)';
            elements.categoryTitle.style.transform = 'scale(1.05)';
            
            console.log(`üéØ Ba≈ülƒ±k g√ºncellendi: ${newTitle}`);
        }

        // Otomatik ki≈üiselle≈ütirme s√ºreci
        async function startAutoPersonalization() {
            // 1. Kullanƒ±cƒ± profili algƒ±lama
            showToast('üç™ Kullanƒ±cƒ± Profili Algƒ±lanƒ±yor', '√áerezlerden √∂nceki ziyaret bilgileri analiz ediliyor...');
            
            setTimeout(async () => {
                // 2. Profil belirlendi
                const profile = USER_PROFILES[Math.floor(Math.random() * USER_PROFILES.length)];
                showToast('‚úÖ Profil Belirlendi', `${profile.persona} profili algƒ±landƒ±. AI ba≈ülƒ±k √ºretiliyor...`);
                
                setTimeout(async () => {
                    // 3. WebLLM y√ºkle ve ba≈ülƒ±k √ºret
                    await loadWebLLMAndGenerate(profile);
                }, 2000);
                
            }, 2000);
        }

        // WebLLM y√ºkle ve otomatik ba≈ülƒ±k √ºret
        async function loadWebLLMAndGenerate(profile) {
            try {
                showToast('ü§ñ AI Model Y√ºkleniyor', 'WebLLM motoru tarayƒ±cƒ±da ba≈ülatƒ±lƒ±yor...');
                
                // WebLLM import ve y√ºkleme
                const { CreateMLCEngine } = await import('https://esm.run/@mlc-ai/web-llm');
                
                mlcEngine = await CreateMLCEngine(
                    "Llama-3.1-8B-Instruct-q4f32_1-MLC",
                    { 
                        initProgressCallback: (report) => {
                            if (report.progress !== undefined) {
                                const progress = Math.round(report.progress * 100);
                                showToast('üîÑ Model Y√ºkleniyor', `WebLLM y√ºkleniyor... ${progress}%`, 500);
                            }
                        },
                        logLevel: "INFO" 
                    }
                );

                isModelLoaded = true;
                
                // Ba≈ülƒ±k √ºret
                await generateAutoTitle(profile);
                
            } catch (error) {
                console.error('WebLLM y√ºkleme hatasƒ±:', error);
                showToast('‚ùå AI Hatasƒ±', 'Model y√ºklenemedi, varsayƒ±lan ba≈ülƒ±k kullanƒ±lƒ±yor.');
                
                // Fallback ba≈ülƒ±k
                updatePageTitle(`${profile.persona} ƒ∞√ßin √ñzel ${SITE_CONFIG.category.name} Koleksiyonu`);
            }
        }

        // Otomatik ba≈ülƒ±k √ºretme
        async function generateAutoTitle(profile) {
            try {
                showToast('üéØ Ba≈ülƒ±k √úretiliyor', 'Ki≈üiselle≈ütirilmi≈ü ba≈ülƒ±k olu≈üturuluyor...');
                
                const prompt = `Sen e-ticaret ba≈ülƒ±k uzmanƒ±sƒ±n. ${SITE_CONFIG.siteName} sitesinde ${SITE_CONFIG.category.name} kategorisi i√ßin ki≈üiselle≈ütirilmi≈ü ba≈ülƒ±k yaz.

Kullanƒ±cƒ± Profili: ${profile.persona}
- Ya≈ü: ${profile.ageGroup}
- ƒ∞lgi: ${profile.interest}
- B√ºt√ße: ${profile.budget}
- M√º≈üteri tipi: ${profile.visitFrequency}
- Zaman: ${profile.timePeriod}

Sadece ba≈ülƒ±ƒüƒ± yaz, 6-10 kelime, dikkat √ßekici, CTA odaklƒ±:`;

                const completion = await mlcEngine.chat.completions.create({
                    messages: [
                        { role: "system", content: "Sen d√ºnya √ßapƒ±nda √ºnl√º e-ticaret copywriter'ƒ±sƒ±n. Kƒ±sa, etkili, CTA odaklƒ± ba≈ülƒ±klar yazarsƒ±n." },
                        { role: "user", content: prompt }
                    ],
                    temperature: 0.7,
                    max_tokens: 50
                });

                const generatedTitle = completion.choices[0]?.message?.content?.trim() || 
                    `${profile.interest.charAt(0).toUpperCase() + profile.interest.slice(1)} Tutkunu ƒ∞√ßin ${SITE_CONFIG.category.name} - ${profile.timePeriod.charAt(0).toUpperCase() + profile.timePeriod.slice(1)} Fƒ±rsatlarƒ±!`;

                // Ba≈ülƒ±ƒüƒ± g√ºncelle
                updatePageTitle(generatedTitle);
                showToast('‚ú® Ba≈ülƒ±k G√ºncellendi', 'Size √∂zel ba≈ülƒ±k olu≈üturuldu!');
                
            } catch (error) {
                console.error('Ba≈ülƒ±k √ºretme hatasƒ±:', error);
                const fallbackTitle = `${profile.persona} ƒ∞√ßin ${SITE_CONFIG.category.name} - √ñzel Fƒ±rsatlar!`;
                updatePageTitle(fallbackTitle);
                showToast('‚úÖ Ba≈ülƒ±k Hazƒ±r', 'Ki≈üiselle≈ütirilmi≈ü ba≈ülƒ±k aktif!');
            }
        }

        // Sayfa ba≈ülatma - Otomatik sistem
        function initializePage() {
            // Site bilgilerini g√ºncelle
            elements.siteTitle.textContent = SITE_CONFIG.siteName;
            elements.categoryTitle.innerHTML = `${SITE_CONFIG.category.icon} ${SITE_CONFIG.category.name} Kategorisi`;
            elements.productCount.textContent = SITE_CONFIG.category.productCount;
            
            // √úr√ºnleri g√∂ster
            renderProducts();
            
            // Otomatik AI ki≈üiselle≈ütirme s√ºreci ba≈ülat
            startAutoPersonalization();
        }

        // Sayfa y√ºklendiƒüinde otomatik ba≈ülat
        document.addEventListener('DOMContentLoaded', initializePage);

        // Config'i global yap (√∂zelle≈ütirme i√ßin)
        window.SITE_CONFIG = SITE_CONFIG;
        
        // Demo a√ßƒ±klama
        console.log(`
üéØ Otomatik E-ticaret WebLLM Demo
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ú® Tamamen otomatik ki≈üiselle≈ütirme!

- Sayfa y√ºklendiƒüinde √ßerezlerden profil algƒ±lar
- WebLLM'i otomatik y√ºkler  
- Ki≈üiselle≈ütirilmi≈ü CTA ba≈ülƒ±ƒüƒ± √ºretir
- Ba≈ülƒ±k sayfanƒ±n tepesinde belirgin ≈üekilde g√∂r√ºn√ºr

üç™ Otomatik s√ºre√ß ba≈ülƒ±yor...
        `);
    </script>
</body>
</html>